if myHero.charName ~= "Ryze" then return end
require 'FSL'

EnemyTeam = {}
TargetList = {}

function OnLoad()

	Config = scriptConfig("RyzeBot", "Ryze")
	
	Config:addSubMenu("Combo", "ComboConfig")
		Config.ComboConfig:addParam("Combo", "Combo", SCRIPT_PARAM_ONKEYDOWN, false, 32)
		Config.ComboConfig:addParam("ComboUnderTower", "Combo Under Tower", SCRIPT_PARAM_ONOFF, true)
		Config.ComboConfig:addParam("MoveToMouseCombo", "Move To Mouse while Combo", SCRIPT_PARAM_ONOFF, true)
	
	-- Harass
	Config:addSubMenu("Auto Harass", "AutoHarass")
		Config.AutoHarass:addParam("Harass", "Harass", SCRIPT_PARAM_ONKEYTOGGLE, false, string.byte('Z'))
		Config.AutoHarass:addParam("HarassUnderTower", "Harass Under Tower", SCRIPT_PARAM_ONOFF, false)
		Config.AutoHarass:addParam("MinManaToHarass","Min Mana To Harass %", SCRIPT_PARAM_SLICE, 50, 0, 100, 0)
	
	-- Farm
	Config:addSubMenu("Auto Farm", "Farm")
		Config.Farm:addParam("SpellFarm", "Spell Farm", SCRIPT_PARAM_ONKEYTOGGLE, false, string.byte('X'))
		Config.Farm:addParam("QFarm", "Use Q to Farm", SCRIPT_PARAM_ONOFF, true)
		Config.Farm:addParam("WFarm", "Use W to Farm", SCRIPT_PARAM_ONOFF, false)
		Config.Farm:addParam("EFarm", "Use E to Farm", SCRIPT_PARAM_ONOFF, true)
		Config.Farm:addParam("MinManaToFarm","Min Mana To Farm %", SCRIPT_PARAM_SLICE, 50, 0, 100, 0)
		Config.Farm:addParam("Info"," ", SCRIPT_PARAM_INFO, "")
		Config.Farm:addParam("AAFarm", "AA Farm", SCRIPT_PARAM_ONKEYDOWN, false, string.byte('C'))
	
	-- Draw 
	Config:addSubMenu("Draw Options", "DrawOptions")
		Config.DrawOptions:addParam("Info"," ", SCRIPT_PARAM_INFO, "")
		Config.DrawOptions:addParam("DrawComboRange", "Draw Combo Range", SCRIPT_PARAM_ONOFF, true)
		Config.DrawOptions:addParam("Info"," ", SCRIPT_PARAM_INFO, "")
		Config.DrawOptions:addParam("DrawEnemyBox", "Draw Box Around Enemy", SCRIPT_PARAM_ONOFF, true)
		Config.DrawOptions:addParam("Info"," ", SCRIPT_PARAM_INFO, "")
		Config.DrawOptions:addParam("DrawMinions", "Draw Minions Hp", SCRIPT_PARAM_ONOFF, false)
		Config.DrawOptions:addParam("Info"," ", SCRIPT_PARAM_INFO, "")
		Config.DrawOptions:addParam("Info1","Draw Info Eats a lot FPS! Disable Hp Bar Drawing", SCRIPT_PARAM_INFO, "")
		Config.DrawOptions:addParam("DrawEnemyInfo", "Draw Enemy Info", SCRIPT_PARAM_ONOFF, true)
		Config.DrawOptions:addParam("DrawAllyInfo", "Draw Ally Info", SCRIPT_PARAM_ONOFF, true)
		Config.DrawOptions:addParam("DrawMyInfo", "Draw My Hero Info", SCRIPT_PARAM_ONOFF, true)
	
	ts = TargetSelector(TARGET_LOW_HP_PRIORITY, 620, DAMAGE_MAGIC, true)
	ts.name = "Ryze"
	Config:addTS(ts)
	
	SpellQ = FSLSpells(FSLHeroSpellsTable[myHero.charName].SpellQ)
	SpellW = FSLSpells(FSLHeroSpellsTable[myHero.charName].SpellW)
	SpellE = FSLSpells(FSLHeroSpellsTable[myHero.charName].SpellE)
	SpellR = FSLSpells(FSLHeroSpellsTable[myHero.charName].SpellR)
	Turrets = FSLTurrets()
	Enemys = FSLEnemy()
	Ally = FSLAlly()
	Me = FSLMyHero()
	
	
	AutoFarm = FSLAutoFarm(20, 600)
end

function OnTick()
	SpellQ:Update()
	SpellW:Update()
	SpellE:Update()
	SpellR:Update()
	Turrets:Update()
	AutoFarm:Update()
	ts:update()
	
	Target = ts.target
	
	if Config.ComboConfig.Combo then
		if Target ~= nil then
			if Config.ComboConfig.ComboUnderTower == false then
				if Turrets:UnderTurret(myHero, not myHero.team) == false then
					Combo(Target)
				end
			else
				Combo(Target)
			end
		end
		if Config.ComboConfig.MoveToMouseCombo then
			myHero:MoveTo(mousePos.x, mousePos.z)
		end
	end
	
	if Config.AutoHarass.Harass and myHero.mana/myHero.maxMana*100 >= Config.AutoHarass.MinManaToHarass and not Config.ComboConfig.Combo then
		if Target ~= nil then
			if Config.AutoHarass.HarassUnderTower == false then
				if Turrets:UnderTurret(myHero, not myHero.team) == false then
					Harass(Target)
				end
			else
				Harass(Target)
			end
		end
	end
	
	if Config.Farm.SpellFarm and myHero.mana/myHero.maxMana*100 >= Config.Farm.MinManaToFarm and not Config.ComboConfig.Combo then
		AutoFarm:SpellsFarm(SpellQ, Config.Farm.QFarm, SpellW, Config.Farm.WFarm, SpellE, Config.Farm.EFarm)
	end
	
	if Config.Farm.AAFarm and not Config.Combo then
		AutoFarm:AAFarm()
	end
	
	
end


function OnDraw()
	if Config.DrawOptions.DrawComboRange then
		SpellQ:DrawRange()
	end
	
	if Config.DrawOptions.DrawEnemyBox then
		Enemys:DrawBox()
	end
	if Config.DrawOptions.DrawEnemyInfo then
		Enemys:DrawInfo()
	end
	if Config.DrawOptions.DrawMinions then
		AutoFarm:Hp()
		AutoFarm:AAFarmDraw()
	end
	
	if Config.DrawOptions.DrawAllyInfo then
		Ally:DrawInfo()
		Ally:DrawBox()
	end
	if Config.DrawOptions.DrawMyInfo then
		Me:DrawBox()
		Me:DrawInfo()
	end
	
end

function Combo(Target)
	if Get2dDistance(Target, myHero) < 550 then
		SpellQ:CastSpellOnTarget(Target)
		SpellR:CastSpell(myHero)
		SpellW:CastSpellOnTarget(Target)
		SpellE:CastSpellOnTarget(Target)
	elseif Get2dDistance(Target, myHero) < 600 then
		SpellW:CastSpellOnTarget(Target)
		SpellR:CastSpell(myHero)
		SpellQ:CastSpellOnTarget(Target)
		SpellE:CastSpellOnTarget(Target)
	end
	
end

function Harass(Target)
	SpellQ:CastSpellOnTarget(Target)
	SpellE:CastSpellOnTarget(Target)
end
